<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="sale_estimate" language="groovy" pageWidth="595" pageHeight="842" columnWidth="545" leftMargin="25" rightMargin="25" topMargin="25" bottomMargin="25" isSummaryNewPage="true" isFloatColumnFooter="true" uuid="9c1f11b7-03dd-4803-9e1b-41b87b9d23c0">
  <property name="ireport.zoom" value="1.6963904734899409"/>
  <property name="ireport.x" value="0"/>
  <property name="ireport.y" value="674"/>
  <template><![CDATA["../../corporate_identity/reporting_style.xml"]]></template>
  <style name="Title" fontName="Open Sans" fontSize="50" isBold="true" pdfFontName="Open Sans"/>
  <style name="SubTitle" forecolor="#736343" fontName="Open Sans" fontSize="18"/>
  <style name="Column header" forecolor="#666666" fontName="Open Sans" fontSize="12" isBold="true"/>
  <style name="Detail" fontName="Open Sans" fontSize="12"/>
  <style name="Row" mode="Transparent"/>
  <style name="table">
    <box>
      <pen lineWidth="1.0" lineColor="#000000"/>
    </box>
  </style>
  <style name="table_TH" mode="Opaque" backcolor="#F0F8FF">
    <box>
      <pen lineWidth="0.5" lineColor="#000000"/>
    </box>
  </style>
  <style name="table_CH" mode="Opaque" backcolor="#BFE1FF">
    <box>
      <pen lineWidth="0.5" lineColor="#000000"/>
    </box>
  </style>
  <style name="table_TD" mode="Opaque" backcolor="#FFFFFF">
    <box>
      <pen lineWidth="0.5" lineColor="#000000"/>
    </box>
  </style>
  <subDataset name="sale_items" uuid="e1b74445-e266-4905-b7ca-c69a482d0793">
    <queryString language="xPath"><![CDATA[/sale/items/item]]></queryString>
    <field name="annotation" class="java.lang.String">
      <fieldDescription><![CDATA[annotation]]></fieldDescription>
    </field>
    <field name="label" class="java.lang.String">
      <fieldDescription><![CDATA[label]]></fieldDescription>
    </field>
    <field name="number" class="java.lang.String">
      <fieldDescription><![CDATA[variant/number]]></fieldDescription>
    </field>
    <field name="quantity" class="java.math.BigDecimal">
      <fieldDescription><![CDATA[quantity]]></fieldDescription>
    </field>
    <field name="pretax-amount" class="java.math.BigDecimal">
      <fieldDescription><![CDATA[pretax-amount]]></fieldDescription>
    </field>
    <field name="unit-price" class="java.math.BigDecimal">
      <fieldDescription><![CDATA[unit-pretax-amount]]></fieldDescription>
    </field>
    <field name="tax-amount" class="java.math.BigDecimal">
      <fieldDescription><![CDATA[taxes-amount]]></fieldDescription>
    </field>
    <field name="tax-name" class="java.lang.String">
      <fieldDescription><![CDATA[tax-short-label]]></fieldDescription>
    </field>
    <field name="unit-name" class="java.lang.String">
      <fieldDescription><![CDATA[variant/unit-name]]></fieldDescription>
    </field>
    <field name="reduction-percentage" class="java.math.BigDecimal">
      <fieldDescription><![CDATA[reduction-percentage]]></fieldDescription>
    </field>
  </subDataset>
  <subDataset name="sale_parcels" uuid="07ef2449-e779-427e-b578-038e9378267f">
    <queryString language="xPath"><![CDATA[/sale/items/item/parcel-items/parcel-item]]></queryString>
    <field name="id" class="java.lang.String">
      <fieldDescription><![CDATA[id]]></fieldDescription>
    </field>
    <field name="population" class="java.lang.String">
      <fieldDescription><![CDATA[population]]></fieldDescription>
    </field>
    <field name="product_name" class="java.lang.String">
      <fieldDescription><![CDATA[product/name]]></fieldDescription>
    </field>
    <field name="product_number" class="java.lang.String">
      <fieldDescription><![CDATA[product/number]]></fieldDescription>
    </field>
    <field name="product_work-number" class="java.lang.String">
      <fieldDescription><![CDATA[product/work-number]]></fieldDescription>
    </field>
    <field name="product_born-at" class="java.lang.String">
      <fieldDescription><![CDATA[product/born-at]]></fieldDescription>
    </field>
    <field name="parcel_number" class="java.lang.String">
      <fieldDescription><![CDATA[parcel/number]]></fieldDescription>
    </field>
    <field name="parcel_reference-number" class="java.lang.String">
      <fieldDescription><![CDATA[parcel/reference-number]]></fieldDescription>
    </field>
    <field name="parcel_state" class="java.lang.String">
      <fieldDescription><![CDATA[parcel/state]]></fieldDescription>
    </field>
    <field name="parcel_planned-at" class="java.util.Date">
      <fieldDescription><![CDATA[parcel/planned-at]]></fieldDescription>
    </field>
    <field name="label" class="java.lang.String">
      <fieldDescription><![CDATA[ancestor::item/label]]></fieldDescription>
    </field>
  </subDataset>
  <parameter name="XML_DATA_DOCUMENT" class="java.lang.String" isForPrompting="false"/>
  <parameter name="XML_URL" class="java.lang.String" isForPrompting="false"/>
  <queryString language="xPath"><![CDATA[/sale]]></queryString>
  <field name="number" class="java.lang.String">
    <fieldDescription><![CDATA[number]]></fieldDescription>
  </field>
  <field name="created-on" class="java.util.Date">
    <fieldDescription><![CDATA[created-at]]></fieldDescription>
  </field>
  <field name="label" class="java.lang.String">
    <fieldDescription><![CDATA[label]]></fieldDescription>
  </field>
  <field name="quantity" class="java.lang.String">
    <fieldDescription><![CDATA[quantity]]></fieldDescription>
  </field>
  <field name="identification-number" class="java.lang.String">
    <fieldDescription><![CDATA[items/item/product/identification-number]]></fieldDescription>
  </field>
  <field name="name" class="java.lang.String">
    <fieldDescription><![CDATA[items/item/product/name]]></fieldDescription>
  </field>
  <field name="annotation" class="java.lang.String">
    <fieldDescription><![CDATA[annotation]]></fieldDescription>
  </field>
  <field name="description" class="java.lang.String">
    <fieldDescription><![CDATA[description]]></fieldDescription>
  </field>
  <field name="letter-format" class="java.lang.Boolean">
    <fieldDescription><![CDATA[letter-format]]></fieldDescription>
  </field>
  <field name="function-title" class="java.lang.String">
    <fieldDescription><![CDATA[function-title]]></fieldDescription>
  </field>
  <field name="introduction" class="java.lang.String">
    <fieldDescription><![CDATA[introduction]]></fieldDescription>
  </field>
  <field name="conclusion" class="java.lang.String">
    <fieldDescription><![CDATA[conclusion]]></fieldDescription>
  </field>
  <field name="mail-line-1" class="java.lang.String">
    <fieldDescription><![CDATA[invoice-address/mail-line-1]]></fieldDescription>
  </field>
  <field name="mail-line-2" class="java.lang.String">
    <fieldDescription><![CDATA[invoice-address/mail-line-2]]></fieldDescription>
  </field>
  <field name="mail-line-3" class="java.lang.String">
    <fieldDescription><![CDATA[invoice-address/mail-line-3]]></fieldDescription>
  </field>
  <field name="mail-line-4" class="java.lang.String">
    <fieldDescription><![CDATA[invoice-address/mail-line-4]]></fieldDescription>
  </field>
  <field name="mail-line-5" class="java.lang.String">
    <fieldDescription><![CDATA[invoice-address/mail-line-5]]></fieldDescription>
  </field>
  <field name="mail-line-6" class="java.lang.String">
    <fieldDescription><![CDATA[invoice-address/mail-line-6]]></fieldDescription>
  </field>
  <field name="credit" class="java.lang.String">
    <fieldDescription><![CDATA[credit]]></fieldDescription>
  </field>
  <field name="invoice-credit-number" class="java.lang.String">
    <fieldDescription><![CDATA[credits/number]]></fieldDescription>
  </field>
  <field name="mail-line-1_1" class="java.lang.String">
    <fieldDescription><![CDATA[supplier/default-mail-address/mail-line-1]]></fieldDescription>
  </field>
  <field name="mail-line-2_1" class="java.lang.String">
    <fieldDescription><![CDATA[supplier/default-mail-address/mail-line-2]]></fieldDescription>
  </field>
  <field name="mail-line-3_1" class="java.lang.String">
    <fieldDescription><![CDATA[supplier/default-mail-address/mail-line-3]]></fieldDescription>
  </field>
  <field name="mail-line-4_1" class="java.lang.String">
    <fieldDescription><![CDATA[supplier/default-mail-address/mail-line-4]]></fieldDescription>
  </field>
  <field name="mail-line-5_1" class="java.lang.String">
    <fieldDescription><![CDATA[supplier/default-mail-address/mail-line-5]]></fieldDescription>
  </field>
  <field name="mail-line-6_1" class="java.lang.String">
    <fieldDescription><![CDATA[supplier/default-mail-address/mail-line-6]]></fieldDescription>
  </field>
  <field name="currency" class="java.lang.String">
    <fieldDescription><![CDATA[currency/@name]]></fieldDescription>
  </field>
  <field name="amount" class="java.math.BigDecimal">
    <fieldDescription><![CDATA[amount]]></fieldDescription>
  </field>
  <field name="tax-amount" class="java.math.BigDecimal">
    <fieldDescription><![CDATA[taxes-amount]]></fieldDescription>
  </field>
  <field name="pretax-amount" class="java.math.BigDecimal">
    <fieldDescription><![CDATA[pretax-amount]]></fieldDescription>
  </field>
  <field name="affair-closed" class="java.lang.String">
    <fieldDescription><![CDATA[affair-closed]]></fieldDescription>
  </field>
  <field name="expired-on" class="java.util.Date">
    <fieldDescription><![CDATA[expired-at]]></fieldDescription>
  </field>
  <field name="code-client" class="java.lang.String">
    <fieldDescription><![CDATA[client-number]]></fieldDescription>
  </field>
  <field name="supplier-payment-address" class="java.lang.String">
    <fieldDescription><![CDATA[supplier/default-mail-address/coordinate]]></fieldDescription>
  </field>
  <field name="picture-path" class="java.lang.String">
    <fieldDescription><![CDATA[supplier/picture-path]]></fieldDescription>
  </field>
  <field name="supplier-mail-coordinate" class="java.lang.String">
    <fieldDescription><![CDATA[supplier/default-mail-address/mail-coordinate]]></fieldDescription>
  </field>
  <field name="client-mail-coordinate" class="java.lang.String">
    <fieldDescription><![CDATA[invoice-address/mail-coordinate]]></fieldDescription>
  </field>
  <field name="supplier-vat-number" class="java.lang.String">
    <fieldDescription><![CDATA[supplier/vat-number]]></fieldDescription>
  </field>
  <field name="supplier-siret" class="java.lang.String">
    <fieldDescription><![CDATA[supplier/siret-number]]></fieldDescription>
  </field>
  <field name="supplier-activity-code" class="java.lang.String">
    <fieldDescription><![CDATA[supplier/activity-code]]></fieldDescription>
  </field>
  <field name="state" class="java.lang.String">
    <fieldDescription><![CDATA[state]]></fieldDescription>
  </field>
  <field name="sales-conditions" class="java.lang.String">
    <fieldDescription><![CDATA[//sales-condition]]></fieldDescription>
  </field>
  <title>
    <band height="210" splitType="Stretch">
      <image onErrorType="Blank">
        <reportElement isPrintRepeatedValues="false" x="0" y="0" width="160" height="80" isRemoveLineWhenBlank="true" uuid="2d16fc74-a19d-4df0-a5d6-06465493c786">
          <printWhenExpression><![CDATA[$F{picture-path}.isEmpty() == false]]></printWhenExpression>
        </reportElement>
        <imageExpression><![CDATA[$F{picture-path}]]></imageExpression>
      </image>
      <textField isStretchWithOverflow="true" isBlankWhenNull="true">
        <reportElement style="base" x="0" y="85" width="160" height="20" uuid="e3405f7a-d77a-4973-8477-7c5f4db54cc9"/>
        <textElement>
          <font fontName="Open Sans"/>
        </textElement>
        <textFieldExpression><![CDATA[$F{supplier-mail-coordinate}]]></textFieldExpression>
      </textField>
      <textField isStretchWithOverflow="true" isBlankWhenNull="true">
        <reportElement style="address" x="298" y="110" width="216" height="75" uuid="26697e66-338b-4015-ae81-9e889924a3a0"/>
        <textFieldExpression><![CDATA[$F{client-mail-coordinate}.toUpperCase()]]></textFieldExpression>
      </textField>
      <textField>
        <reportElement style="base" positionType="FixRelativeToBottom" x="0" y="165" width="225" height="20" uuid="a5b3c2d2-d67c-4daa-8b08-6e6ae55a079e">
          <printWhenExpression><![CDATA[$F{letter-format} == true && !$F{function-title}.isEmpty()]]></printWhenExpression>
        </reportElement>
        <textElement>
          <font fontName="Open Sans"/>
        </textElement>
        <textFieldExpression><![CDATA[$F{function-title}]]></textFieldExpression>
      </textField>
      <textField>
        <reportElement style="base" positionType="FixRelativeToBottom" x="0" y="184" width="545" height="20" uuid="44988d8c-c245-4b41-b9f5-87e516ea84e9">
          <printWhenExpression><![CDATA[$F{letter-format} == true && !$F{function-title}.isEmpty()]]></printWhenExpression>
        </reportElement>
        <textElement>
          <font fontName="Open Sans"/>
        </textElement>
        <textFieldExpression><![CDATA[$F{introduction}]]></textFieldExpression>
      </textField>
      <staticText>
        <reportElement style="error" x="320" y="0" width="226" height="50" uuid="261156b8-12ff-4dd0-a589-73b721464300">
          <printWhenExpression><![CDATA[$F{state} == "refused"]]></printWhenExpression>
        </reportElement>
        <textElement textAlignment="Center" verticalAlignment="Middle">
          <font fontName="Open Sans" size="24" isBold="true"/>
        </textElement>
        <text><![CDATA[ANNULÉ]]></text>
      </staticText>
    </band>
  </title>
  <pageHeader>
    <band height="125" splitType="Stretch">
      <textField isBlankWhenNull="true">
        <reportElement style="base" positionType="Float" stretchType="RelativeToTallestObject" isPrintRepeatedValues="false" x="0" y="60" width="546" height="25" isRemoveLineWhenBlank="true" uuid="21707c3a-b932-43d3-8098-660716e50ed4"/>
        <textFieldExpression><![CDATA[$F{annotation}]]></textFieldExpression>
      </textField>
      <frame>
        <reportElement positionType="Float" x="0" y="10" width="546" height="50" uuid="f4e8fe19-70f2-4a67-95b9-93fd245cf6a2"/>
        <textField pattern="dd MMMMM yyyy" isBlankWhenNull="true">
          <reportElement style="base" x="400" y="0" width="145" height="30" uuid="805184f6-42a0-4444-91f4-6ec4a5abfb2c"/>
          <textElement textAlignment="Right" verticalAlignment="Middle">
            <font fontName="Open Sans"/>
          </textElement>
          <textFieldExpression><![CDATA[$F{created-on}]]></textFieldExpression>
        </textField>
        <textField>
          <reportElement style="emphasis" x="0" y="30" width="543" height="20" isRemoveLineWhenBlank="true" isPrintWhenDetailOverflows="true" uuid="66b40237-3012-4724-b01d-e40b46286686">
            <printWhenExpression><![CDATA[$F{credit} == "true"]]></printWhenExpression>
          </reportElement>
          <textElement verticalAlignment="Middle">
            <font fontName="Open Sans" size="12" isItalic="true"/>
          </textElement>
          <textFieldExpression><![CDATA["Lié à la facture "+$F{invoice-credit-number}]]></textFieldExpression>
        </textField>
        <textField>
          <reportElement style="title" mode="Transparent" x="0" y="0" width="400" height="30" isPrintWhenDetailOverflows="true" uuid="b09496fd-c5f7-47e8-8a78-d4543d544ccf"/>
          <textElement verticalAlignment="Middle">
            <font fontName="Open Sans" size="14"/>
          </textElement>
          <textFieldExpression><![CDATA[($F{credit} == "true" ? "Avoir" : $F{state} == "invoice" ? "Facture" : $F{state} == "order" ? "Commande" :  $F{state} == "estimate" ? "Devis" : "Vente") + " " +$F{number}]]></textFieldExpression>
        </textField>
        <line>
          <reportElement style="title" x="0" y="30" width="545" height="1" uuid="d53f909b-bb26-41c7-92cc-9e677b4705a1"/>
        </line>
      </frame>
      <textField isBlankWhenNull="true">
        <reportElement style="emphasis" positionType="Float" stretchType="RelativeToTallestObject" isPrintRepeatedValues="false" x="0" y="85" width="545" height="40" isRemoveLineWhenBlank="true" uuid="eb65c809-9971-4fc4-affe-e6cbe89320ef"/>
        <textFieldExpression><![CDATA[$F{description}]]></textFieldExpression>
      </textField>
    </band>
  </pageHeader>
  <columnHeader>
    <band height="35" splitType="Stretch">
      <staticText>
        <reportElement style="table-th" mode="Transparent" x="0" y="0" width="65" height="35" uuid="e9d0ed32-7c70-4573-ac89-3b121d3c250c"/>
        <textElement textAlignment="Center" verticalAlignment="Middle"/>
        <text><![CDATA[Code]]></text>
      </staticText>
      <staticText>
        <reportElement style="table-th" mode="Transparent" x="65" y="0" width="150" height="35" uuid="bd4cb338-364f-45d0-86b8-b8b9bc736141"/>
        <textElement textAlignment="Center" verticalAlignment="Middle"/>
        <text><![CDATA[Désignation]]></text>
      </staticText>
      <staticText>
        <reportElement style="table-th" mode="Transparent" x="215" y="0" width="50" height="35" uuid="81560c3d-ba73-4193-b9b6-dd9c17f21cd1"/>
        <textElement textAlignment="Center" verticalAlignment="Middle"/>
        <text><![CDATA[Qté.]]></text>
      </staticText>
      <staticText>
        <reportElement style="table-th" mode="Transparent" x="265" y="0" width="60" height="35" uuid="5de0274d-7863-48ea-8190-985687753255"/>
        <textElement textAlignment="Center" verticalAlignment="Middle">
          <paragraph leftIndent="5"/>
        </textElement>
        <text><![CDATA[PU HT]]></text>
      </staticText>
      <staticText>
        <reportElement style="table-th" mode="Transparent" x="375" y="0" width="60" height="35" uuid="1bc74b56-51d2-4b66-9afd-718773705fb2"/>
        <textElement textAlignment="Center" verticalAlignment="Middle">
          <paragraph leftIndent="5"/>
        </textElement>
        <text><![CDATA[Montant HT]]></text>
      </staticText>
      <staticText>
        <reportElement style="table-th" mode="Transparent" x="435" y="0" width="60" height="35" uuid="9a274a35-2948-4ab7-8cdc-423e7c842e5c"/>
        <textElement textAlignment="Center" verticalAlignment="Middle">
          <paragraph leftIndent="5"/>
        </textElement>
        <text><![CDATA[Montant TVA]]></text>
      </staticText>
      <staticText>
        <reportElement style="table-th" mode="Transparent" x="495" y="0" width="50" height="35" uuid="78c7a07c-7dc5-4928-8beb-f4d5b170e2be"/>
        <textElement textAlignment="Center" verticalAlignment="Middle"/>
        <text><![CDATA[Taux TVA]]></text>
      </staticText>
      <staticText>
        <reportElement style="table-th" mode="Transparent" x="325" y="0" width="50" height="35" uuid="7966310b-76da-48e3-a4eb-53ffd70cb029"/>
        <textElement textAlignment="Center" verticalAlignment="Middle">
          <paragraph leftIndent="5"/>
        </textElement>
        <text><![CDATA[Remise]]></text>
      </staticText>
    </band>
  </columnHeader>
  <detail>
    <band height="20" splitType="Stretch">
      <componentElement>
        <reportElement stretchType="RelativeToBandHeight" x="0" y="0" width="545" height="20" uuid="97443d93-f81d-47ab-83a9-0e7959b0267a"/>
        <jr:list xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd" printOrder="Vertical">
          <datasetRun subDataset="sale_items" uuid="1ce66453-8dd8-4d13-b606-675efbfa2e87">
            <parametersMapExpression><![CDATA[$P{REPORT_PARAMETERS_MAP}]]></parametersMapExpression>
            <datasetParameter name="XML_DATE_PATTERN">
              <datasetParameterExpression><![CDATA[$P{XML_DATE_PATTERN}]]></datasetParameterExpression>
            </datasetParameter>
            <datasetParameter name="XML_NUMBER_PATTERN">
              <datasetParameterExpression><![CDATA[$P{XML_NUMBER_PATTERN}]]></datasetParameterExpression>
            </datasetParameter>
            <datasetParameter name="XML_LOCALE">
              <datasetParameterExpression><![CDATA[$P{XML_LOCALE}]]></datasetParameterExpression>
            </datasetParameter>
            <connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
          </datasetRun>
          <jr:listContents height="20" width="545">
            <textField isBlankWhenNull="true">
              <reportElement style="table-td" stretchType="RelativeToBandHeight" x="0" y="0" width="65" height="20" uuid="d0dd50da-1ed1-4fd9-b5c1-3497590208a7"/>
              <textElement textAlignment="Center" verticalAlignment="Middle">
                <font fontName="Open Sans" size="7"/>
              </textElement>
              <textFieldExpression><![CDATA[$F{number}]]></textFieldExpression>
            </textField>
            <textField isStretchWithOverflow="true" isBlankWhenNull="true">
              <reportElement style="table-td-info" stretchType="RelativeToBandHeight" mode="Transparent" x="65" y="0" width="150" height="20" uuid="9908ac58-fdda-4bcc-910a-0f9aa3280ee6"/>
              <textElement verticalAlignment="Middle" markup="none">
                <font fontName="Open Sans" size="10"/>
                <paragraph leftIndent="5"/>
              </textElement>
              <textFieldExpression><![CDATA[$F{annotation} == null ?  $F{label} : $F{label}+" \n "+$F{annotation}]]></textFieldExpression>
            </textField>
            <textField pattern="###0.00;-###0.00">
              <reportElement style="table-td" stretchType="RelativeToBandHeight" x="215" y="0" width="50" height="20" uuid="20f38410-29f4-49cd-8e6f-24cbc786a6d4"/>
              <textElement textAlignment="Center" verticalAlignment="Middle">
                <font fontName="Open Sans" size="10"/>
              </textElement>
              <textFieldExpression><![CDATA[$F{quantity}]]></textFieldExpression>
            </textField>
            <textField pattern="###0.00;-###0.00" isBlankWhenNull="true">
              <reportElement style="table-td" stretchType="RelativeToBandHeight" x="375" y="0" width="60" height="20" uuid="0b648e3b-aed0-453c-9405-b859d7e955dc"/>
              <textElement textAlignment="Center" verticalAlignment="Middle">
                <font fontName="Open Sans" size="10"/>
              </textElement>
              <textFieldExpression><![CDATA[$F{pretax-amount}]]></textFieldExpression>
            </textField>
            <textField pattern="###0.00;-###0.00" isBlankWhenNull="true">
              <reportElement style="table-td" stretchType="RelativeToBandHeight" x="265" y="0" width="60" height="20" uuid="7f2e6d23-5ee1-4a10-aa1c-541a705f3aaa"/>
              <textElement textAlignment="Center" verticalAlignment="Middle">
                <font fontName="Open Sans" size="10"/>
              </textElement>
              <textFieldExpression><![CDATA[$F{unit-price}]]></textFieldExpression>
            </textField>
            <textField pattern="###0.00;-###0.00" isBlankWhenNull="true">
              <reportElement style="table-td" stretchType="RelativeToBandHeight" x="435" y="0" width="60" height="20" uuid="da0a807f-f913-4e39-a0bf-17656f28303d"/>
              <textElement textAlignment="Center" verticalAlignment="Middle">
                <font fontName="Open Sans" size="10"/>
              </textElement>
              <textFieldExpression><![CDATA[$F{tax-amount}]]></textFieldExpression>
            </textField>
            <textField isBlankWhenNull="true">
              <reportElement style="table-td" stretchType="RelativeToBandHeight" x="495" y="0" width="50" height="20" uuid="d47a4a8e-00e6-4d3d-bcf7-719a0ee3992f"/>
              <textElement textAlignment="Center" verticalAlignment="Middle">
                <font fontName="Open Sans" size="8" isBold="false"/>
              </textElement>
              <textFieldExpression><![CDATA[$F{tax-name}]]></textFieldExpression>
            </textField>
            <textField pattern="#,##0.00 %">
              <reportElement style="table-td" stretchType="RelativeToBandHeight" x="325" y="0" width="50" height="20" uuid="f4c2c2c5-8703-4aa7-9592-100dc56005b9"/>
              <textFieldExpression><![CDATA[$F{reduction-percentage} / 100]]></textFieldExpression>
            </textField>
          </jr:listContents>
        </jr:list>
      </componentElement>
    </band>
  </detail>
  <columnFooter>
    <band height="85" splitType="Stretch">
      <rectangle radius="0">
        <reportElement style="title" mode="Transparent" x="375" y="10" width="170" height="62" forecolor="#000000" uuid="84b93687-691b-4769-9980-be1d6a9bdf9c"/>
      </rectangle>
      <textField pattern="###0.00;-###0.00">
        <reportElement style="strong" x="435" y="10" width="60" height="20" uuid="b0485431-9720-4e37-8f53-e65780f5888d"/>
        <textElement textAlignment="Center" verticalAlignment="Middle">
          <font fontName="Open Sans" isBold="true"/>
        </textElement>
        <textFieldExpression><![CDATA[$F{pretax-amount}]]></textFieldExpression>
      </textField>
      <textField pattern="###0.00;-###0.00" isBlankWhenNull="true">
        <reportElement style="strong" x="435" y="30" width="60" height="20" uuid="43a970b2-f527-4b15-997a-6925442462cb"/>
        <textElement textAlignment="Center" verticalAlignment="Middle">
          <font fontName="Open Sans"/>
        </textElement>
        <textFieldExpression><![CDATA[$F{tax-amount}]]></textFieldExpression>
      </textField>
      <staticText>
        <reportElement style="label-strong" mode="Transparent" x="375" y="10" width="60" height="20" uuid="1c01c258-98f5-40a2-b54f-98d66d34e25d"/>
        <textElement textAlignment="Right" verticalAlignment="Middle">
          <font fontName="Open Sans" size="10" isBold="false"/>
          <paragraph rightIndent="5"/>
        </textElement>
        <text><![CDATA[  Total HT]]></text>
      </staticText>
      <textField pattern="###0.00;-###0.00" isBlankWhenNull="true">
        <reportElement style="strong" x="435" y="50" width="60" height="20" uuid="124e0f89-744c-4b93-8f8a-5f19e3854ee4"/>
        <textElement textAlignment="Center" verticalAlignment="Middle">
          <font fontName="Open Sans" isBold="true"/>
        </textElement>
        <textFieldExpression><![CDATA[$F{amount}]]></textFieldExpression>
      </textField>
      <textField isBlankWhenNull="true">
        <reportElement style="label" x="495" y="10" width="48" height="20" uuid="0604b7bb-f256-4b24-8138-565cb197e783"/>
        <textElement verticalAlignment="Middle"/>
        <textFieldExpression><![CDATA[$F{currency}]]></textFieldExpression>
      </textField>
      <textField>
        <reportElement x="1" y="10" width="360" height="60" uuid="6e14f690-5c48-4a0e-8670-3dc334461959"/>
        <textElement textAlignment="Justified" verticalAlignment="Middle" markup="html"/>
        <textFieldExpression><![CDATA[$F{sales-conditions}]]></textFieldExpression>
      </textField>
      <staticText>
        <reportElement style="label-strong" mode="Transparent" x="375" y="50" width="60" height="20" uuid="8e91e740-f977-4cf1-8fb4-f4ca02f5f996"/>
        <textElement textAlignment="Right" verticalAlignment="Middle">
          <font fontName="Open Sans" size="10" isBold="false"/>
          <paragraph rightIndent="5"/>
        </textElement>
        <text><![CDATA[  Total TTC]]></text>
      </staticText>
      <staticText>
        <reportElement style="label-strong" mode="Transparent" x="375" y="30" width="60" height="20" uuid="41b22813-d884-4123-9564-a25441f93272"/>
        <textElement textAlignment="Right" verticalAlignment="Middle">
          <font fontName="Open Sans" size="10" isBold="false"/>
          <paragraph rightIndent="5"/>
        </textElement>
        <text><![CDATA[  Total TVA]]></text>
      </staticText>
      <textField isBlankWhenNull="true">
        <reportElement style="label" x="495" y="50" width="48" height="20" uuid="3162ec02-aba1-4d78-aa74-a9d8eabdb42b"/>
        <textElement verticalAlignment="Middle"/>
        <textFieldExpression><![CDATA[$F{currency}]]></textFieldExpression>
      </textField>
      <textField isBlankWhenNull="true">
        <reportElement style="label" x="495" y="30" width="48" height="20" uuid="d691457e-cf2e-4d1b-956c-2611bcb06021"/>
        <textElement verticalAlignment="Middle"/>
        <textFieldExpression><![CDATA[$F{currency}]]></textFieldExpression>
      </textField>
    </band>
  </columnFooter>
  <pageFooter>
    <band height="20" splitType="Stretch">
      <textField pattern="dd/MM/yyyy HH:mm">
        <reportElement style="base" mode="Transparent" x="0" y="0" width="100" height="20" forecolor="#000000" uuid="2e0909fa-9d0c-4cd4-9e2f-2a8b1460d557"/>
        <textElement textAlignment="Center" verticalAlignment="Middle">
          <font fontName="Open Sans"/>
        </textElement>
        <textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
      </textField>
      <textField>
        <reportElement style="address" x="100" y="0" width="345" height="20" uuid="15199718-4f5c-4263-a4c6-d5126f8fbd80"/>
        <textElement textAlignment="Center" verticalAlignment="Middle">
          <font fontName="Open Sans" size="6"/>
        </textElement>
        <textFieldExpression><![CDATA[($F{supplier-vat-number} == null ? "" : "N° TVA Intracommunautaire : "+$F{supplier-vat-number})+
($F{supplier-siret} == null ? "" : " - SIRET : "+$F{supplier-siret})+
($F{supplier-activity-code} == null ? "" : " - Code APE : "+$F{supplier-activity-code})]]></textFieldExpression>
      </textField>
      <line>
        <reportElement style="title" x="0" y="0" width="545" height="1" uuid="727ce719-b56f-4dbf-bcae-102d12b6170e"/>
      </line>
      <textField>
        <reportElement style="base" x="445" y="0" width="83" height="20" forecolor="#000000" uuid="ac27f682-0ce1-4319-aea3-b4d61d7fb848"/>
        <textElement textAlignment="Right" verticalAlignment="Middle">
          <font fontName="Open Sans"/>
        </textElement>
        <textFieldExpression><![CDATA[$V{PAGE_NUMBER}+"/"]]></textFieldExpression>
      </textField>
      <textField evaluationTime="Report">
        <reportElement style="base" x="527" y="0" width="17" height="20" forecolor="#000000" uuid="6d77ddc2-b59c-4e7d-8dfb-133742953183"/>
        <textElement verticalAlignment="Middle">
          <font fontName="Open Sans"/>
          <paragraph leftIndent="1"/>
        </textElement>
        <textFieldExpression><![CDATA[$V{PAGE_NUMBER}]]></textFieldExpression>
      </textField>
    </band>
  </pageFooter>
  <lastPageFooter>
    <band height="168" splitType="Stretch">
      <textField isBlankWhenNull="true">
        <reportElement style="base" positionType="FixRelativeToBottom" stretchType="RelativeToTallestObject" x="1" y="1" width="542" height="14" isRemoveLineWhenBlank="true" uuid="291e6748-2548-445c-b64c-8399200e9453">
          <printWhenExpression><![CDATA[$F{letter-format} == true && !$F{function-title}.isEmpty()]]></printWhenExpression>
        </reportElement>
        <textElement>
          <font fontName="Open Sans"/>
        </textElement>
        <textFieldExpression><![CDATA[$F{conclusion}]]></textFieldExpression>
      </textField>
      <line>
        <reportElement style="title" x="-2" y="148" width="545" height="1" uuid="f5776528-13fb-4c0c-bf2d-f8c8add24286"/>
      </line>
      <textField>
        <reportElement style="address" x="98" y="148" width="345" height="20" uuid="3eb6de32-9658-40c3-aa78-89271f77a5f6"/>
        <textElement textAlignment="Center" verticalAlignment="Middle">
          <font fontName="Open Sans" size="6"/>
        </textElement>
        <textFieldExpression><![CDATA[($F{supplier-vat-number} == null ? "" : "N° TVA Intracommunautaire : "+$F{supplier-vat-number})+
($F{supplier-siret} == null ? "" : " - SIRET : "+$F{supplier-siret})+
($F{supplier-activity-code} == null ? "" : " - Code APE : "+$F{supplier-activity-code})]]></textFieldExpression>
      </textField>
      <textField pattern="dd/MM/yyyy HH:mm">
        <reportElement style="base" mode="Transparent" x="-2" y="148" width="100" height="20" forecolor="#000000" uuid="44687450-4cb0-4ff4-99ef-a51032230e0f"/>
        <textElement textAlignment="Center" verticalAlignment="Middle">
          <font fontName="Open Sans"/>
        </textElement>
        <textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
      </textField>
      <frame>
        <reportElement x="163" y="26" width="368" height="100" isRemoveLineWhenBlank="true" uuid="ea580315-84e7-4dcf-b781-8e5c815ecf78"/>
        <line direction="BottomUp">
          <reportElement style="title" x="145" y="46" width="11" height="11" isRemoveLineWhenBlank="true" uuid="d6686b88-42d4-4593-a612-ca62f66c0d9b"/>
        </line>
        <line>
          <reportElement style="title" x="144" y="36" width="1" height="21" isRemoveLineWhenBlank="true" uuid="485ef46e-2a31-4bef-854d-47e3dfc65b35"/>
        </line>
        <line>
          <reportElement style="title" x="145" y="36" width="11" height="11" isRemoveLineWhenBlank="true" uuid="a30aaec7-f3c8-443e-bb17-a505b5ff195e"/>
        </line>
        <rectangle radius="2">
          <reportElement style="title" x="162" y="0" width="200" height="100" isRemoveLineWhenBlank="true" uuid="57c067cd-b110-4eb9-a78f-67e6568b368e"/>
        </rectangle>
        <staticText>
          <reportElement style="base" x="2" y="0" width="134" height="100" isRemoveLineWhenBlank="true" uuid="90cef81c-83fc-4629-9978-4070d0185bbb"/>
          <textElement textAlignment="Center" verticalAlignment="Middle">
            <font fontName="Open Sans"/>
          </textElement>
          <text><![CDATA[Veuillez apposer la mention « Bon pour accord », dater et signer.]]></text>
        </staticText>
        <elementGroup/>
      </frame>
      <textField evaluationTime="Report">
        <reportElement style="base" x="527" y="148" width="17" height="20" forecolor="#000000" uuid="5e5e0743-18c2-4ce5-85ff-7812175ff8a2"/>
        <textElement verticalAlignment="Middle">
          <font fontName="Open Sans"/>
          <paragraph leftIndent="1"/>
        </textElement>
        <textFieldExpression><![CDATA[$V{PAGE_NUMBER}]]></textFieldExpression>
      </textField>
      <textField>
        <reportElement style="base" x="445" y="148" width="83" height="20" forecolor="#000000" uuid="143de1d6-61b0-44f4-b232-186fee16938c"/>
        <textElement textAlignment="Right" verticalAlignment="Middle">
          <font fontName="Open Sans"/>
        </textElement>
        <textFieldExpression><![CDATA[$V{PAGE_NUMBER}+"/"]]></textFieldExpression>
      </textField>
    </band>
  </lastPageFooter>
  <summary>
    <band height="44">
      <line>
        <reportElement style="title" x="1" y="19" width="545" height="1" uuid="82cbcf98-7775-4fa6-b16d-e50e80885f68"/>
      </line>
      <componentElement>
        <reportElement key="table" x="0" y="25" width="544" height="19" isRemoveLineWhenBlank="true" uuid="45246cbc-b67c-4669-bc16-8a9a9dad281c"/>
        <jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
          <datasetRun subDataset="sale_parcels" uuid="3eceb79f-ac11-4da7-9a45-7a9a2d44ed64">
            <parametersMapExpression><![CDATA[$P{REPORT_PARAMETERS_MAP}]]></parametersMapExpression>
            <datasetParameter name="XML_DATE_PATTERN">
              <datasetParameterExpression><![CDATA[$P{XML_DATE_PATTERN}]]></datasetParameterExpression>
            </datasetParameter>
            <datasetParameter name="XML_NUMBER_PATTERN">
              <datasetParameterExpression><![CDATA[$P{XML_NUMBER_PATTERN}]]></datasetParameterExpression>
            </datasetParameter>
            <datasetParameter name="XML_LOCALE">
              <datasetParameterExpression><![CDATA[$P{XML_LOCALE}]]></datasetParameterExpression>
            </datasetParameter>
            <connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
          </datasetRun>
          <jr:column width="90" uuid="81a8ac00-9787-4831-b05e-d8a33ee282e7">
            <jr:columnHeader style="table_CH" height="30" rowSpan="1">
              <staticText>
                <reportElement style="table_TH" x="0" y="0" width="90" height="30" backcolor="#FFFFFF" uuid="4bf713b8-d6a0-4a65-b033-29232d6c1919"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                  <font isBold="true"/>
                </textElement>
                <text><![CDATA[Type]]></text>
              </staticText>
            </jr:columnHeader>
            <jr:detailCell style="table_TD" height="20" rowSpan="1">
              <textField>
                <reportElement style="table_TD" x="0" y="0" width="90" height="20" uuid="6e5909fd-5139-496e-bddf-97610080f8a9"/>
                <textElement textAlignment="Center" verticalAlignment="Middle"/>
                <textFieldExpression><![CDATA[$F{label}]]></textFieldExpression>
              </textField>
            </jr:detailCell>
          </jr:column>
          <jr:column width="90" uuid="cc07f11c-29ef-4350-93c2-b9524c8a3595">
            <jr:columnHeader style="table_CH" height="30" rowSpan="1">
              <staticText>
                <reportElement style="table_TH" x="0" y="0" width="90" height="30" backcolor="#FFFFFF" uuid="6939c2ea-0716-4cef-8621-c9ccfeb57a91"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                  <font isBold="true"/>
                </textElement>
                <text><![CDATA[Nom]]></text>
              </staticText>
            </jr:columnHeader>
            <jr:detailCell style="table_TD" height="20" rowSpan="1">
              <textField>
                <reportElement style="table_TD" x="0" y="0" width="90" height="20" uuid="ed6195d0-03bd-41b5-bf68-c564b5873ae0"/>
                <textElement textAlignment="Center" verticalAlignment="Middle"/>
                <textFieldExpression><![CDATA[$F{product_name}]]></textFieldExpression>
              </textField>
            </jr:detailCell>
          </jr:column>
          <jr:column width="90" uuid="6fec7fa3-b0aa-429e-bfe1-b72b19302cf1">
            <jr:columnHeader style="table_CH" height="30" rowSpan="1">
              <staticText>
                <reportElement style="table_TH" x="0" y="0" width="90" height="30" backcolor="#FFFFFF" uuid="0517a7f8-9908-459d-81d4-8a6b315d4bd5"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                  <font isBold="true"/>
                </textElement>
                <text><![CDATA[Qté.]]></text>
              </staticText>
            </jr:columnHeader>
            <jr:detailCell style="table_TD" height="20" rowSpan="1">
              <textField>
                <reportElement style="table_TD" x="0" y="0" width="90" height="20" uuid="6a2769a0-0a88-4fff-97e5-c111b3a6c2bd"/>
                <textElement textAlignment="Center" verticalAlignment="Middle"/>
                <textFieldExpression><![CDATA[$F{population}]]></textFieldExpression>
              </textField>
            </jr:detailCell>
          </jr:column>
          <jr:column width="90" uuid="ce46ecf1-1e38-42dc-9250-f80ac51c7633">
            <jr:columnHeader style="table_CH" height="30" rowSpan="1">
              <staticText>
                <reportElement style="table_TH" x="0" y="0" width="90" height="30" backcolor="#FFFFFF" uuid="c155e45b-6f40-4826-a917-2e883c0ca655"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                  <font isBold="true" isStrikeThrough="false"/>
                </textElement>
                <text><![CDATA[Numéro   du colis]]></text>
              </staticText>
            </jr:columnHeader>
            <jr:detailCell style="table_TD" height="20" rowSpan="1">
              <textField>
                <reportElement style="table_TD" x="0" y="0" width="90" height="20" uuid="e3e21b33-d3c7-4784-a945-0fbb098f1621"/>
                <textElement textAlignment="Center" verticalAlignment="Middle"/>
                <textFieldExpression><![CDATA[$F{parcel_number}]]></textFieldExpression>
              </textField>
            </jr:detailCell>
          </jr:column>
          <jr:column width="90" uuid="4596489e-bea2-4727-a524-75bd75e34fda">
            <jr:columnHeader style="table_CH" height="30" rowSpan="1">
              <staticText>
                <reportElement style="table_TH" mode="Opaque" x="0" y="0" width="90" height="30" backcolor="#FFFFFF" uuid="abd49d72-d9d0-4b98-872b-f0b288f2e4f4"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                  <font isBold="true"/>
                </textElement>
                <text><![CDATA[Etat]]></text>
              </staticText>
            </jr:columnHeader>
            <jr:detailCell style="table_TD" height="20" rowSpan="1">
              <textField isBlankWhenNull="true">
                <reportElement style="table_TD" x="0" y="0" width="90" height="20" uuid="00e9ba54-abcb-49db-830a-57d433723afe"/>
                <textElement textAlignment="Center" verticalAlignment="Middle"/>
                <textFieldExpression><![CDATA[($F{parcel_state} == 'given' ? 'Livré' : 'Plannifié')]]></textFieldExpression>
              </textField>
            </jr:detailCell>
          </jr:column>
          <jr:column width="90" uuid="ea139b18-67ed-40e5-8533-5c2c6393f737">
            <jr:columnHeader style="table_CH" height="30" rowSpan="1">
              <staticText>
                <reportElement style="table_TH" x="0" y="0" width="90" height="30" backcolor="#FFFFFF" uuid="bde90c1f-a180-4636-9cff-45cc1e031bb3"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                  <font isBold="true"/>
                </textElement>
                <text><![CDATA[Plannifié le]]></text>
              </staticText>
            </jr:columnHeader>
            <jr:detailCell style="table_TD" height="20" rowSpan="1">
              <textField pattern="dd/MM/yyyy h.mm a" isBlankWhenNull="true">
                <reportElement style="table_TD" x="0" y="0" width="90" height="20" uuid="6fa95997-acf4-4be7-916d-e45f2f640619"/>
                <textElement textAlignment="Center" verticalAlignment="Middle"/>
                <textFieldExpression><![CDATA[$F{parcel_planned-at}]]></textFieldExpression>
              </textField>
            </jr:detailCell>
          </jr:column>
        </jr:table>
      </componentElement>
      <staticText>
        <reportElement style="Title" x="0" y="0" width="86" height="20" uuid="72d38cb1-1b2e-4820-a8d7-59c5fb6f6f32"/>
        <textElement>
          <font size="14" isBold="false"/>
        </textElement>
        <text><![CDATA[Colis]]></text>
      </staticText>
    </band>
  </summary>
</jasperReport>
